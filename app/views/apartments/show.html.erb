<div class="mb-4">
  <%= link_to "< Back to All Apartments", apartments_path, class: "text-decoration-none" %>
</div>

<div class="row mb-4">
  <div class="col-lg-8">
    <% if @apartment.images.attached? %>
      <div id="apartmentCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <% @apartment.images.each_with_index do |image, index| %>
            <div class="carousel-item <%= index == 0 ? 'active' : '' %>">
              <%= image_tag image, class: "d-block w-100", style: "height: 500px; object-fit: cover;" %>
            </div>
          <% end %>
        </div>
        <% if @apartment.images.count > 1 %>
          <button class="carousel-control-prev" type="button" data-bs-target="#apartmentCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#apartmentCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        <% end %>
      </div>
    <% else %>
      <div class="bg-light d-flex align-items-center justify-content-center" style="height: 500px;">
        <span class="text-muted">No images available</span>
      </div>
    <% end %>
  </div>
  
  <div class="col-lg-4">
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title mb-3">Price & Details</h5>
        
        <h2 class="text-primary mb-3">$<%= number_with_precision(@apartment.price, precision: 2, delimiter: ',') %>/month</h2>
        
        <hr>
        
        <div class="row mt-3">
          <div class="col-6 mb-3">
            <div class="d-flex align-items-center">
              <i class="fas fa-bed fa-fw me-2 text-muted"></i>
              <div>
                <small class="text-muted d-block">Bedrooms</small>
                <strong><%= @apartment.bedrooms %></strong>
              </div>
            </div>
          </div>
          
          <div class="col-6 mb-3">
            <div class="d-flex align-items-center">
              <i class="fas fa-bath fa-fw me-2 text-muted"></i>
              <div>
                <small class="text-muted d-block">Bathrooms</small>
                <strong><%= @apartment.bathrooms %></strong>
              </div>
            </div>
          </div>
          
          <div class="col-6 mb-3">
            <div class="d-flex align-items-center">
              <i class="fas fa-ruler-combined fa-fw me-2 text-muted"></i>
              <div>
                <small class="text-muted d-block">Square Feet</small>
                <strong><%= @apartment.square_feet ? "#{@apartment.square_feet} sq ft" : "N/A" %></strong>
              </div>
            </div>
          </div>
          
          <div class="col-6 mb-3">
            <div class="d-flex align-items-center">
              <i class="fas fa-calendar-day fa-fw me-2 text-muted"></i>
              <div>
                <small class="text-muted d-block">Available From</small>
                <strong><%= @apartment.available_date ? @apartment.available_date.strftime("%b %d, %Y") : "Now" %></strong>
              </div>
            </div>
          </div>
        </div>
        
        <hr>
        
        <div class="d-grid gap-2">
          <button class="btn btn-primary btn-lg">Schedule a Tour</button>
          <button class="btn btn-outline-primary">Apply Now</button>
        </div>
      </div>
    </div>
    
    <div class="d-flex justify-content-between">
      <%= link_to "Edit", edit_apartment_path(@apartment), class: "btn btn-sm btn-outline-secondary" %>
      <%= button_to "Delete", apartment_path(@apartment), method: :delete, data: { confirm: "Are you sure you want to delete this apartment?" }, class: "btn btn-sm btn-outline-danger" %>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-8">
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title mb-4"><%= @apartment.title %></h2>
        
        <p class="text-muted mb-4">
          <i class="fas fa-map-marker-alt me-2"></i>
          <%= @apartment.address %>, <%= @apartment.city %>, <%= @apartment.state %> <%= @apartment.zip %>
        </p>
        
        <h5 class="mb-3">Description</h5>
        <p class="mb-4"><%= @apartment.description %></p>
      </div>
    </div>
    
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="mb-3">Location</h5>
        <div class="ratio ratio-16x9">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d387193.30596670663!2d-74.25986582652897!3d40.697149419826654!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c24fa5d33f083b%3A0xc80b8f06e177fe62!2sNew%20York%2C%20NY!5e0!3m2!1sen!2sus!4v1619826407988!5m2!1sen!2sus" 
                  style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-lg-4">
    <!-- Contact information or additional details can be added here -->
  </div>
</div>